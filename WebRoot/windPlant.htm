
<!DOCTYPE HTML>
<!-- <html manifest="generator.manifest">  -->
<html>
	<head>
    	<meta name="viewport" content="width=device-width">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>Highcharts Example</title>
        <script type="text/javascript" src="./support/jquery-1.11.2.min.js"></script>        
        <script type="text/javascript" src="./support/bootstrap/js/bootstrap.min.js"></script>    
        <link href="./support/bootstrap/css/bootstrap.min.css" rel="stylesheet" />	

		<script type="text/javascript" src="./support/easyui/jquery.easyui.min.js"></script> 
        <script type="text/javascript" src="./support/datatable/media/js/jquery.dataTables.min.js"></script> 
        <link rel="stylesheet" type="text/css" href="./support/datatable/media/css/jquery.dataTables.min.css"/>	

        <!--日期选择框-->
		<script src="./support/datepicker/js/mobiscroll.core-2.5.2.js" type="text/javascript"></script>
        <script src="./support/datepicker/js/mobiscroll.core-2.5.2-zh.js" type="text/javascript"></script>
        <link href="./support/datepicker/css/mobiscroll.core-2.5.2.css" rel="stylesheet" type="text/css" />
        <link href="./support/datepicker/css/mobiscroll.animation-2.5.2.css" rel="stylesheet" type="text/css" />
        <script src="./support/datepicker/js/mobiscroll.datetime-2.5.1.js" type="text/javascript"></script>
        <script src="./support/datepicker/js/mobiscroll.datetime-2.5.1-zh.js" type="text/javascript"></script>
        <script src="./support/datepicker/js/mobiscroll.android-ics-2.5.2.js" type="text/javascript"></script>
        <link href="./support/datepicker/css/mobiscroll.android-ics-2.5.2.css" rel="stylesheet" type="text/css" />
        
        <script src="./support/jquery.json.min.js" type="text/javascript"></script>
        <link href="./support/threeMainPage.css" rel="stylesheet" type="text/css" />
            

		<script type="text/javascript">
    var columnOption = null;
    var rangeOption =null;
    var stackColumnOption = null;
    //用来提示差额、超额
    var columnRangeDataFlag = new Array();
    
$(function () {

		
		
		optionContainer={
			chart:{
				spacingLeft:0,
				renderTo: 'lineContainer1'
			},
			colors:['#ff0000','#00ff00','#0000ff'],
			plotOptions:{
				line:{
					lineWidth:2,
					pointStart:1
				}
			},
			exporting:{
				enabled:false
			},
			credits:{
				enabled:'false',
				text:''
			},
			labels:{
			},
            title: {
                text: '风场A实时有功',
//                  x: -20, //center 
            },
            subtitle: {
                text: '',
                x: -20
            },
            xAxis: {
//                  categories: ['1', '2', '3', '4', '5', '6',
//                     '7', '8', '9', '10', '1', '12'], 
            },
            yAxis: {
                title: {
                    text: '有功 (兆瓦)',
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
					
                }],
				labels:{

				}
            },
            tooltip: {
//                 valueSuffix: '万千瓦时',
//                 headerFormat:"<span style=\"font-size: 10px\">$(\"#appDate\").value(),{point.key}</span><br/>",
//                 pointFormat:"{series.name}:<b>aaa{point.y}</b>"
				formatter:function(){
					
					var s = ''+this.series.name+':'+(timeStrArray[this.x*9])+'';
					s += '<br/>'+this.y+'兆瓦';
					return s;
				}
            },
            legend: {
//                  layout: 'vertical',
//                 align: 'right',
// 				verticalAlign:'top',
// 				floating:'true',
// 				y:50,
//                 borderWidth: 0, 
            },
            series: [{
                name: '实际',
                data: [12.0, 12.9, 12.5, 14.5, 18.2, 21.5, 25.2, 14.5, 16.3, 18.3, 13.9, 9.6,
                		12.0, 12.9, 12.5, 14.5, 18.2, 21.5, 25.2, 14.5, 16.3, 18.3, 13.9, 9.6,
                		12.0, 12.9, 12.5, 14.5, 18.2]
            }, {
                name: '预测',
                data:  [10.0, 10.9, 12.5, 12.9, 16.2, 22.5, 22.2, 12.5, 12.3, 12.3, 13.9, 16.6,
                		17.0, 15.9, 15.5, 15.5, 15.2, 23.5, 22.2, 15.5, 13.3, 14.3, 17.9, 15.6,
                		16.0, 12.9, 14.5, 13.5, 11.2]
            }]
        };//全网线图
        
        chart = new Highcharts.Chart(optionContainer);
        
    });	
  
  $(function () {

		
		
		optionContainer={
			chart:{
				spacingLeft:0,
				renderTo: 'lineContainer2'
			},
			colors:['#ff0000','#00ff00','#0000ff'],
			plotOptions:{
				line:{
					lineWidth:2,
					pointStart:1
				}
			},
			exporting:{
				enabled:false
			},
			credits:{
				enabled:'false',
				text:''
			},
			labels:{
			},
            title: {
                text: '风场B实时有功',
//                  x: -20, //center 
            },
            subtitle: {
                text: '',
                x: -20
            },
            xAxis: {
//                  categories: ['1', '2', '3', '4', '5', '6',
//                     '7', '8', '9', '10', '1', '12'], 
            },
            yAxis: {
                title: {
                    text: '有功 (兆瓦)',
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
					
                }],
				labels:{

				}
            },
            tooltip: {
//                 valueSuffix: '万千瓦时',
//                 headerFormat:"<span style=\"font-size: 10px\">$(\"#appDate\").value(),{point.key}</span><br/>",
//                 pointFormat:"{series.name}:<b>aaa{point.y}</b>"
				formatter:function(){
					
					var s = ''+this.series.name+':'+(timeStrArray[this.x*9])+'';
					s += '<br/>'+this.y+'兆瓦';
					return s;
				}
            },
            legend: {
//                  layout: 'vertical',
//                 align: 'right',
// 				verticalAlign:'top',
// 				floating:'true',
// 				y:50,
//                 borderWidth: 0, 
            },
            series: [{
                name: '实际',
                data: [12.0, 12.9, 12.5, 14.5, 18.2, 21.5, 25.2, 14.5, 16.3, 18.3, 13.9, 9.6,
                		12.0, 12.9, 12.5, 14.5, 18.2, 21.5, 25.2, 14.5, 16.3, 18.3, 13.9, 9.6,
                		12.0, 12.9, 12.5, 14.5, 18.2]
            }, {
                name: '预测',
                data:  [10.0, 10.9, 12.5, 12.9, 16.2, 22.5, 22.2, 12.5, 12.3, 12.3, 13.9, 16.6,
                		17.0, 15.9, 15.5, 15.5, 15.2, 23.5, 22.2, 15.5, 13.3, 14.3, 17.9, 15.6,
                		16.0, 12.9, 14.5, 13.5, 11.2]
            }]
        };//全网线图
        
        chart = new Highcharts.Chart(optionContainer);
        
    });	
  
  
  
  
//月度发电量  
$(function () {
       columnOption ={
            chart: {
                type: 'column',
                renderTo: 'columnContainer'
            },
            title: {
                text: '公司月度累计发电量'
            },
            subtitle: {
                text: ''
            },
            exporting:{
				enabled:false
			},
			credits:{
				enabled:'false',
				text:''
			},
            xAxis: {
                type: 'category',
                labels: {
                    rotation: -45,
                    style: {
                        fontSize: '13px',
                        fontFamily: 'Verdana, sans-serif'
                    }
                }
            },
            yAxis: {
                min: 0,
                title: {
                    text: null
                }
            },
            legend: {
                enabled: false
            },
            tooltip: {
                //pointFormat: '月度发电量<b>{point.y:.1f} (万千瓦时)</b>',
                formatter:function(){
					var month = $("#appDate").val().substr(5,2);
					var s = this.series.data[this.x].name+month+'月份';
					s += '<br/>'+this.y+'万千瓦时';
					return s;
				}
            },
            series: [{
                name: 'Population',
                data: [
                    ['风场A', 23.7],
                    ['风场B', 16,1],
                    ['风场C', 14.2],
                    ['风场D', 14.0]
                ],
                dataLabels: {
                    enabled: true,
                    rotation: -90,
                    color: '#FFFFFF',
                    align: 'right',
                    x: 4,
                    y: 10,
                    style: {
                        fontSize: '13px',
                        fontFamily: 'Verdana, sans-serif',
                        textShadow: '0 0 3px black'
                    }
                }
            }]
        };
        chart = new Highcharts.Chart(columnOption);
    });

	

$(function () {
        stackColumnOption ={
            chart: {
                type: 'bar',
                renderTo:'stackColumnContainer'
            },
            title: {
                text: '公司年累积发电量'
            },
			exporting:{
				enabled:false
			},
			credits:{
				enabled:'false',
				text:''
			},
			labels:{
			},
			tooltip: {
	    	},
            xAxis: {
                categories: ['风场A', '风场B', '风场C', '风场D'],
				labels:{
				}
            },
            yAxis: {
                min: 0,
                title: {
                    text: null
                },
				labels:{
				}
            },
            tooltip:{
            	formatter:function(){
					
					var s = this.x+this.series.name+'份'+'<br/>';
					s += this.y+'万千瓦时';
					return s;
				}
            },
            legend: {
                reversed: false
            },
            plotOptions: {
                series: {
                    stacking: 'normal'
                }
            },
                series: [{
                name: '1月',
                data: [5, 3, 4, 7]
            }, {
                name: '2月',
                data: [2, 2, 3, 2]
            }, {
                name: '3月',
                data: [3, 4, 4, 2]
            }, {
                name: '4月',
                data: [3, 4, 4, 2]
            }
			]
        };
        
       chart = new Highcharts.Chart(stackColumnOption);
    });




$(function () {
    	
	rangeOption = {
	
	    chart: {
	        type: 'columnrange',
	        inverted: true,
	        renderTo:'rangeContainer'
	    },
	    
	    title: {
	        text: '公司发电量日历进度'
	    },
	    exporting:{
			enabled:false
		},
		credits:{
			enabled:'false',
			text:''
		},
// 		labels:{
// 		},
	    xAxis: {
	        categories: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'],
			labels:{
			}
	    },
	    
	    yAxis: {
	        title: {
	            text: '发电量(万千瓦时)'
	        },
			labels:{
			}
	    },
	
	    tooltip: {
	       // valueSuffix: '亿千瓦时',
	        formatter:function(){
	        		var high = this.point.high;
					var low  = this.point.low;
					var diff = (high - low).toFixed(2);
					if(columnRangeDataFlag[this.x-1]==1){

					var s = '目标电量：'+high+"<br/>"+'完成电量：'+low+'<br/>'+'差额：'+diff;
					}
					else
					{var s = '目标电量：'+low+"<br/>"+'完成电量：'+high+'<br/>'+'超额：'+diff;}
					return s;
			}
	    },
	    
	    plotOptions: {
	        columnrange: {
	        	dataLabels: {
	        		enabled: true,
	        		formatter: function () {
	        			return this.y + '';
	        		}             
	        	},
                colorByPoint:true,//f15c80
                colors:['#8085e9','#f15c80','#8085e9', '#8085e9',
   '#8085e9','#f15c80','#8085e9','#8085e9','#8085e9','#8085e9','#8085e9','#8085e9']
	        } 
	    },
	    
	    legend: {
	        enabled: false
	    },
       
	
	    series: [{
	        name: '发电量',
	        data: [
				[200, 245],
				[300, 313],
				[380, 400],
				[500, 550],
				[600, 653],
				[700, 790]
			]
	    }]
	
	};
    chart = new Highcharts.Chart(rangeOption);
});	

// 	var sss = 1;
// 	setInterval(function(){
// 		$.ajax({
// 			url:"/pimsPhone/PlantServlet",
// 			data:$.param({"realtime":true}),
// 			type:"post",
// 			beforeSend:function(){
// 				ajaxbg.show(); 
// 			}
		
// 		})
// 		.done(function(data1,statusText){
		
// 			ajaxbg.hide();
// 			var dataReceived = $.evalJSON(data1);

// 		})
// 		.fail(function(){
// 			alert("服务器响应出错");
// 		});
// 	},60000);

submitRequest= function(){
	var date = $("#appDate").val().trim();


	//取历史数据,捎带把实时数据取回来
// 	$.ajax({
// 		url:"/pimsPhone/PlantServlet",
// 		data:$.param({"date":date}),
// 		type:"post",
// 		beforeSend:function(){
// 			ajaxbg.show(); 
// 		}
	
// 	})
// 	.done(function(data1,statusText){
	
// 		ajaxbg.hide();
// 		var dataReceived = $.evalJSON(data1);
		


//      	columnOption.series[0].data=dataReceived.columnData;
//      	chart = new Highcharts.Chart(columnOption);
     	
//      	stackColumnOption.xAxis.categories = dataReceived.seriesPlantName;
//      	stackColumnOption.series=dataReceived.yearAccumulatePlantPowerSeries;
//      	chart = new Highcharts.Chart(stackColumnOption);
     	
//      	var rangeData = dataReceived.plantProgressData;
//       	for(i=0;i<rangeData.length;i++){
//       		if(rangeData[i][0]>rangeData[i][1]){
//       			var temp = rangeData[i][0];
//       			rangeData[i][0] = rangeData[i][1];
//       			rangeData[i][1] = temp;
//       			rangeOption.plotOptions.columnrange.colors[i] = '#f15c80';
//       			columnRangeDataFlag[i] = 1;
//       		}
//       		else
//       			columnRangeDataFlag[i] = 0;
//       	}
//      	rangeOption.series[0].data = rangeData;
//      	var len = rangeData.length;
//      	var min = rangeData[0][0];
//      	var max = rangeData[len-1][1];
//      	rangeOption.yAxis.min = rangeOption.series[0].data[0][0]-(max-min)/12;
//      	rangeOption.yAxis.max = rangeOption.series[0].data[len-1][1]+(max-min)/10;
//      	chart = new Highcharts.Chart(rangeOption);
     	
     	
// 	})
// 	.fail(function(){
// 		alert("服务器响应出错");
// 	});
	
// 	var i = 0;
// 	setInterval(function(){
// 		console.log("来了"+(i++));
// 	},2000);
	
};


		</script>
		<script type="text/javascript" src="./support/threeMainPage.js"></script>
	</head>
	<body>
<script src="./support/highcharts/js/highcharts.js"></script>
<script src="./support/highcharts/js/modules/exporting.js"></script>
<script type="text/javascript" src="./support/highcharts/js/highcharts-more.js"></script> 

<div style="clear:both;height:10px"></div>
<div style="margin-left:20px;margin-right:20px">
	<div style=";float:left">	
        <label for="test_default" style="float:left;;width:80px">日&nbsp;&nbsp;&nbsp;&nbsp;期</label>
        <input type="text" name="test_default" id="appDate" style="width:100px;float:left" />
    </div>
	<div style="float:right;">
		<button id="submitxx" class="btn btn-primary" 
			style="margin:5px 0;height:30px;width:50px"
			 onclick="submitRequest()">查询
		</button>
	</div>
</div>
 
<div style="text-align:center">
<div id="lineContainer1" style="width: 95%;height: 400px;margin-left:auto;margin-right:auto"></div>
</div>
<hr>
<div style="text-align:center">
<div id="lineContainer2" style="width: 95%;height: 400px;margin-left:auto;margin-right:auto"></div>
</div>
<div id="columnContainer" style=" height: 350px;width:95%"></div>
<hr>
<div id="stackColumnContainer" style=" height: 400px;"></div>
<hr>
<div id="rangeContainer" style=" height: auto;"></div>
	</body>
</html>
